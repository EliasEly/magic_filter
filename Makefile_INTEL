CC=gcc
OPTIONS=-O3 -g -Wall -Werror
EXEC=magic_perf magic_test

all: $(EXEC)

magic_test: magic_test.o MagicFilter_naive.o
	$(CC) -o $@ $^

magic_perf: magic_perf.o MagicFilter_naive.o perf.o
	$(CC) -o $@ $^

magic_test.o: magic_test.c magic.h
	$(CC) $(OPTIONS) -o $@ -c $< 

magic_perf.o: magic_perf.c magic.h
	$(CC) $(OPTIONS) -o $@ -c $< 

MagicFilter_NEON.o: MagicFilter_NEON.c magic.h
	$(CC) $(OPTIONS) -o $@ -c $<

MagicFilter_naive.o: MagicFilter_naive.c magic.h
	$(CC) $(OPTIONS) -o $@ -c $<

MagicFilter_sse.o: MagicFilter_sse.c magic.h
	$(CC) $(OPTIONS) -o $@ -c $<

perf.o: perf.c perf.h
	$(CC) $(OPTIONS) -o $@ -c $<

clean:
	rm -f *.o $(EXEC)
